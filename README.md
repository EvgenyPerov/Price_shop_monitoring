# Мониторинг цен на товары в магазине

## Используемые технологии

- Spring Boot 3.2
- Maven 3.2
- Lombok
- Jsoup
- Okhttp3
- Thymeleaf
- PostgreSQL

## Требования

### JDK 17

Проект использует синтаксис Java 17. Для локального запуска вам потребуется
установленный JDK 17.

### Docker
Для запуска проекта вам потребуется создать БД(PostgreSQL) с названием "price_material_db".

### Подключение к интернету

Подключение к интернету для получения актуальных цен

### IntelliJ IDEA

Запустите main метод класса Main

### Добавление позиции для мониторинга
В корне проекта есть файл "urls.txt". Правила его запролнения указаны в первой строке этого файла.
Можно добавлять любое количество материалов, соблюдая синтаксис
Предполагается, что пользователь знает, как скопировать "Selector" элемента на web-странице в браузере.
В случае изменения позиций в файле, потребуется перезапустить приложение.

### Запросы API
Когда программа запущена на сервере, актуализация цен проходит автоматически по расписанию.
Периодичность прописана в файле настроек "application.yml" в блоке "url_file.update.time" и измеряется в днях.
В случае изменения этой цифры, потребуется перезапустить приложение.

Просмотреть результат изменения цен можно на графике, который получаем при GET HTTP запросе:
http://localhost:8080/chart

В сплывающем списке нужно выбрать нужный товар и график обновится автоматически (JS)
Ограничений по датам нет, т.е. данные выбираются все, которые есть в БД.

Для запуска анализа кода через Sonar нужно 
1. запустить Docker-compose.yaml
2.  из корня проекта запустить команду в командной строке:
sonar-scanner -Dsonar.projectKey=Price-change-shop-sonarqube -Dsonar.login=squ_b4d8b53fe1483b26fb940f359bab176c93549e75
3. обновить страницу с результатами анализа по ссылке: http://localhost:9000/projects
   При первом входе логин admin, пароль или 1 или admin